
[< к содержанию](/readme.md)

# git diff

Сравнение — это функция, анализирующая два входных набора данных и отображающая различия между ними. ``git diff`` представляет собой многоцелевую команду **Git**, которая инициирует функцию сравнения источников данных **Git** — коммитов, веток, файлов и т. д. В этом документе описываются типичные варианты вызова git diff и схемы рабочего процесса сравнения. Зачастую вместе с командой ``git diff`` используются ``git status`` и ``git log`` для анализа текущего состояния репозитория **Git**.

## Чтение вывода команды diff

### ***Формат вывода необработанных данных***

Следующие примеры будут выполнены в простом репозитории. Репозиторий создается с помощью перечисленных ниже команд:

```
$:> mkdir diff_test_repo
$:> cd diff_test_repo
$:> touch diff_test.txt
$:> echo "this is a git diff test example" > diff_test.txt
$:> git init .
Initialized empty Git repository in /Users/kev/code/test/.git/
$:> git add diff_test.txt
$:> git commit -am"add diff test file"
[main (root-commit) 6f77fc3] add diff test file
1 file changed, 1 insertion(+)
create mode 100644 diff_test.txt
```

Если выполнить ``git diff`` на этом этапе, команда ничего не выведет. Это ожидаемая ситуация, поскольку в репозитории отсутствуют изменения для сравнения. После создания репозитория и добавления файла ``diff_test.txt`` можно отредактировать его содержимое и поэкспериментировать с выходными данными команды сравнения.
```
$:> echo "this is a diff example" > diff_test.txt
```
При выполнении этой команды содержимое файла ``diff_test.txt`` будет изменено. После этого можно просмотреть изменения и проанализировать выходные данные. Теперь при выполнении ``git diff`` мы получим следующие выходные данные:

```
diff --git a/diff_test.txt b/diff_test.txt
index 6b0c6cf..b37e70a 100644
--- a/diff_test.txt
+++ b/diff_test.txt
@@ -1 +1 @@
-this is a git diff test example
+this is a diff example
```
А теперь подробно рассмотрим выходные данные сравнения.

## 1. Входные данные сравнения

```
diff --git a/diff_test.txt b/diff_test.txt
```

В этой строке отображаются входные данные сравнения. Как видите, для сравнения переданы файлы ``a/diff_test.txt`` и ``b/diff_test.txt.``

## 2. Метаданные

```
index 6b0c6cf..b37e70a 100644
```

В этой строке отображаются внутренние метаданные **Git**. Скорее всего, они вам не понадобятся. Номера в этих выходных данных соответствуют хеш-идентификаторам версий объектов **Git**.

## 3. Маркеры изменений
```
--- a/diff_test.txt
+++ b/diff_test.txt
```

Эти строки представляют собой легенду обозначений для каждого источника входных данных сравнения. В данном случае изменения из файла ``a/diff_test.txt`` помечаются символом ``---``, а из файла ``b/diff_test.txt`` — символом ``+++``.

## 4. Сравниваемые фрагменты

Остальные выходные данные сравнения — это список сравниваемых фрагментов. При сравнении отображаются только разделы файла, в которых есть изменения. В данном примере имеется только один такой фрагмент, поскольку обрабатывается простой сценарий. Фрагменты имеют собственную ограниченную семантику вывода.

```
@@ -1 +1 @@
-this is a git diff test example
+this is a diff example
```

Первая строка — это заголовок фрагмента. К началу каждого фрагмента добавляется заголовок, окруженный символами ``@@``. Заголовок кратко описывает изменения в файле. В нашем простом примере заголовок -1 +1 означает, что имеются изменения в первой строке. В реальных случаях заголовок может выглядеть так:

```
@@ -34,6 +34,8 @@
```

В данном примере заголовка было извлечено 6 строк начиная со строки 34. Кроме того, после строки 34 было добавлено 8 строк.

Остальное содержимое фрагмента сравнения — это недавние изменения. Каждой измененной строке предшествует символ ``+`` или ``-``, указывающий на источник входных данных сравнения. Как уже упоминалось, символ ``-`` указывает на изменения в файле ``a/diff_test.txt``, а ``+`` — на изменения в файле ``b/diff_test.txt``.


[< к содержанию](/readme.md)